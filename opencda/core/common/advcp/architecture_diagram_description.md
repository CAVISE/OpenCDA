# –ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ —Å—Ö–µ–º–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–æ–¥—É–ª—è AdvCP (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

## –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –≤ –º–æ–¥—É–ª–µ AdvCP, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –º–µ—Ç–æ–¥–µ `CoperceptionModelManager.make_prediction()`. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ä–∞–Ω–Ω–∏—Ö –≤–µ—Ä—Å–∏–π, **–Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç OPV2V dataset** ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã OpenCOOD.

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üü¶ **OpenCDA Core**

- **CoperceptionModelManager** ‚Äî –≥–ª–∞–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º

### üóÑÔ∏è **Data Source**

- **DataLoader** ‚Äî –∑–∞–≥—Ä—É–∑—á–∏–∫ –±–∞—Ç—á–µ–π –¥–∞–Ω–Ω—ã—Ö
- **OpenCOOD Dataset** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã OpenCOOD (–±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö OPV2V)

### üß† **Perception Model**

- **OpenCOOD Model** ‚Äî –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è
- **Inference Utils** ‚Äî —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ (early/intermediate/late fusion)

### ‚ö° **AdvCP Module**

- **AdvCPManager** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –º–æ–¥—É–ª—è (–º–µ—Ç–æ–¥ `process_tick()`)
- **OpencoodPerception** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç OpenCOOD
- **Attacker** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞—Ç–∞–∫ (—É–¥–∞–ª–µ–Ω–∏–µ/—Å–ø—É—Ñ–∏–Ω–≥ LiDAR)
- **Defender** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞—â–∏—Ç—ã (CAD Defense)

### üìä **Output & Evaluation**

- **Eval Utils** ‚Äî —Ä–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ (TP/FP)
- **Visualizer** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è 3D/BEV

## –¶–≤–µ—Ç–æ–≤–∞—è –ª–µ–≥–µ–Ω–¥–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

| –¶–≤–µ—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
| --- | --- | --- |
| **üü¶ BLUE** | –û–±—ã—á–Ω—ã–π –ø–æ—Ç–æ–∫ OpenCOOD | –ò–Ω—Ñ–µ—Ä–µ–Ω—Å, –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö |
| **üü© GREEN** | –ê—Ç–∞–∫–∞ (–≤–∫–ª—é—á–µ–Ω–∞) | –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∞—Ç–∞–∫–æ–π |
| **üü• RED** | –ó–∞—â–∏—Ç–∞ (–≤–∫–ª—é—á–µ–Ω–∞) | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ |
| **üüß ORANGE** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AdvCP | –†–µ—à–µ–Ω–∏–µ –æ –≤–∫–ª—é—á–µ–Ω–∏–∏/–æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ |
| **üü™ PURPLE** | –û—Ü–µ–Ω–∫–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è | –ú–µ—Ç—Ä–∏–∫–∏, —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ |
| **--- DASHED** | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞) |
| **¬∑¬∑¬∑ DOTTED** | –°—Å—ã–ª–∫–∏/–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è | –í–µ—Å–∞ –º–æ–¥–µ–ª–∏ |

## –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã (—à–∞–≥–∏)

```python
# –ü—Å–µ–≤–¥–æ–∫–æ–¥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
   - CoperceptionModelManager —Å–æ–∑–¥–∞–µ—Ç DataLoader –∏–∑ OpenCOOD dataset
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç OpenCOOD –º–æ–¥–µ–ª—å
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç AdvCPManager (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
   - AdvCPManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç OpencoodPerception (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)

2. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª (–Ω–∞ –∫–∞–∂–¥—ã–π tick):
   - –ü–æ–ª—É—á–µ–Ω–∏–µ batch_data –∏–∑ DataLoader
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ batch_data –≤ _current_batch_data (–¥–ª—è AdvCP)
   - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ñ–µ—Ä–µ–Ω—Å —á–µ—Ä–µ–∑ inference_utils

   # –¢–û–ß–ö–ê –ü–†–ò–ù–Ø–¢–ò–Ø –†–ï–®–ï–ù–ò–Ø ADVCP
   if advcp_enabled:
       3. –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è AdvCPManager (process_tick(tick_number, batch_data, predictions))

       4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏):
          - AdvCPManager –≤—ã–∑—ã–≤–∞–µ—Ç _get_coperception_data()
          - CoperceptionModelManager –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç _current_batch_data
          - –ò–∑–±–µ–≥–∞–µ—Ç circular dependency

       5. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∞—Ç–∞–∫–∏ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö:
          - –ï—Å–ª–∏ late –∞—Ç–∞–∫–∞: –Ω—É–∂–Ω—ã —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ + predictions
          - –ï—Å–ª–∏ early/intermediate –∞—Ç–∞–∫–∞: –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ

       6. –ê—Ç–∞–∫–∞ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞):
          - –î–ª—è late –∞—Ç–∞–∫: –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è predictions –Ω–∞–ø—Ä—è–º—É—é
          - –î–ª—è early/intermediate –∞—Ç–∞–∫: –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
          - –í–æ–∑–≤—Ä–∞—Ç modified_data

       7. –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ (–¥–ª—è early/intermediate –∞—Ç–∞–∫):
          - OpencoodPerception –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∞—Ç–∞–∫–æ–≤–∞–Ω–Ω—ã–µ —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç OpenCOOD
          - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç early_preprocess() –∏–ª–∏ intermediate_preprocess()

       8. –ó–∞—â–∏—Ç–∞ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞):
          - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ CAD Defense
          - –í–æ–∑–≤—Ä–∞—Ç defended_data –∏ score

       9. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ CoperceptionModelManager
   else:
       # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π

   10. –û—Ü–µ–Ω–∫–∞ –º–µ—Ç—Ä–∏–∫ (TP/FP)

   11. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Ä–∞–Ω–Ω–∏—Ö –≤–µ—Ä—Å–∏–π:**

1. **–ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ OPV2V** ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–∞—Ç–∞—Å–µ—Ç—ã OpenCOOD
2. **–ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞** –≤ AdvCP
3. **–ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞–π–ø–ª–∞–π–Ω CoperceptionModelManager
4. **–î–æ–±–∞–≤–ª–µ–Ω OpencoodPerception** –¥–ª—è –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üîÑ **–†–∞–∑–ª–∏—á–Ω—ã–µ —ç—Ç–∞–ø—ã –∞—Ç–∞–∫:**

- **Late –∞—Ç–∞–∫–∏** (lidar_remove_late, lidar_spoof_late):
  - –¢—Ä–µ–±—É—é—Ç —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ + predictions
  - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç predictions –Ω–∞–ø—Ä—è–º—É—é
  - –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Å—ã—Ä—ã–º –¥–∞–Ω–Ω—ã–º + predictions

- **Early/Intermediate –∞—Ç–∞–∫–∏** (lidar_remove_early, lidar_spoof_early, lidar_remove_intermediate, lidar_spoof_intermediate):
  - –¢—Ä–µ–±—É—é—Ç —Ç–æ–ª—å–∫–æ —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
  - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
  - OpencoodPerception –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∞—Ç–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç OpenCOOD
  - –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º

###  **–£—Å–ª–æ–≤–Ω—ã–µ –≤–µ—Ç–≤–ª–µ–Ω–∏—è:**

- –ê—Ç–∞–∫–∞ –∏ –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ** –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
- –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å: —Ç–æ–ª—å–∫–æ –∞—Ç–∞–∫—É, —Ç–æ–ª—å–∫–æ –∑–∞—â–∏—Ç—É, –∏–ª–∏ –æ–±–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞—â–∏—Ç—ã –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–ø–æ—Å–ª–µ** –∞—Ç–∞–∫–∏ (–µ—Å–ª–∏ –æ–±–µ –≤–∫–ª—é—á–µ–Ω—ã)
- –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –¥–ª—è early/intermediate –∞—Ç–∞–∫

### üìà **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

- `modified_data` ‚Äî –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è (–±–æ–∫—Å—ã, —Å–∫–æ—Ä—ã)
- `score` ‚Äî –æ—Ü–µ–Ω–∫–∞ –¥–æ–≤–µ—Ä–∏—è –æ—Ç –∑–∞—â–∏—Ç—ã CAD
- `metrics` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
